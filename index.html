
<!DOCTYPE html>
<html>
<head lang="en">
 <meta charset="UTF-8">
<style>
	#scream {
		display: none;
	}
</style>
 <script src="./jquery_1.10.1.min.js"></script>
</head>
<body>
<img id="scream" width="500" height="500" src="..\image\20201222_081716.jpg" alt="The Scream">
<canvas id="main" width="500" height="500" style="border: 1px solid red;">
현재 브라우저에서 지원하지 않는 기능입니다.
</canvas>
<input type='color' id='myColor' value='#0000ff'>
<button id="cls">clear</button>
 <script>
  var iX, iY;
  var bDraw = false;
  
  var canvas = document.getElementById("main");
  var ctx = canvas.getContext("2d");
  var bb = canvas.getBoundingClientRect();

$(document).ready(function(){
  ctx.strokeStyle = "#0000ff"; // 초기색상
  ctx.lineJoin = "round";    
  ctx.lineWidth =2;             //선 두께

  var img = document.getElementById("scream");
  ctx.drawImage(img, 0, 0, 500, 500);

	$('#cls').on('click', function(){
    		// 컨텍스트 리셋
    		ctx.beginPath();
		ctx.drawImage(img, 0, 0, 500, 500);

	});

	$('#myColor').on('change', function(){
    		  ctx.strokeStyle = $(this).val(); // 색상지정
	});

});


 

  // 마우스 down 시 그리기 시작으로 설정한다.
  $('#main').mousedown(function(e){
   iX = e.clientX - bb.left;
   iY = e.clientY - bb.top;
   bDraw = true;
  });
  

  // 그리기 시작 상태에서 마우스를 이동하면 마우스 이동 경로를 따라서 선을 그려준다.
  $('#main').mousemove(function(e){
   if( bDraw )
   {
    var iNewX = e.clientX - bb.left;
    var iNewY = e.clientY - bb.top;
   
    ctx.beginPath();
    ctx.moveTo( iX, iY );
    ctx.lineTo( iNewX, iNewY );
    ctx.closePath();
    ctx.stroke();
   
    iX = iNewX;
    iY = iNewY;
   }
  });
  
  $('#main').mouseup(function(e){
   bDraw = false;
  });

 </script>
</body>
</html>
